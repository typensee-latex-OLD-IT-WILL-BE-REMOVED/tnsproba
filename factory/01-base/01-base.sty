% == PACKAGES USED == %

\RequirePackage{amsmath}


% == DEFINITIONS == %

% Semantic probability

\newcommand\proba[2][p]{%
    \mathchoice{% * Display style
        #1\mskip-.65\medmuskip\left( #2 \right)%
    }{%           * Text style
        #1\mskip-.65\medmuskip\left( #2 \right)%
    }{%           * Script style
        #1\left( #2 \right)%
    }{%           * Script script style
        #1\left( #2 \right)%
    }
}


% Conditional probability

\newcommand\tnsproba@abstract@proba@cond[4]{%
    #1{\proba[#2]{#3 \cap #4}}{\proba[#2]{#4}}%
}


\newcommand\probacond{\@ifstar{\tnsproba@proba@cond@star}{\tnsproba@proba@cond@no@star}}

\newcommand\tnsproba@proba@cond@no@star[3][p]{%
    \proba[#1_{#2}]{#3}%
}

\newcommand\tnsproba@proba@cond@star[3][p]{%
    \proba[#1]{#3 \mid #2}%
}


\newcommand\probacondexp{\@ifstar{\tnsproba@proba@cond@exp@star}{\tnsproba@proba@cond@exp@no@star}}

\newcommand\tnsproba@proba@cond@exp@star[3][p]{%
    \tnsproba@abstract@proba@cond{\frac}{#1}{#3}{#2}
}

\newcommand\tnsproba@proba@cond@exp@no@star[3][p]{%
    \tnsproba@abstract@proba@cond{\dfrac}{#1}{#3}{#2}
}


% Expected value 

\newcommand\expval[2][E]{%
    \proba[\mathrm{#1}]{#2}%
}