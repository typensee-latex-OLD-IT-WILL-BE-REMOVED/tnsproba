
% == PACKAGES USED == %

% == DEFINITIONS == %

% -- Comments with auto numbering -- %

% #1 : color
%
% #2 : node
% #3 : comment
\newcommand\aptreeComment{\@ifstar{\aptree@comment@star}{\aptree@comment@no@star}}

\newcommand\aptree@comment@no@star[3][]{
	\ptree@comment@no@star[#1]{!#2}{#3}
}



\newcommand\aptree@comment@star[3][]{
	\ptree@comment@star[#1]{!#2}{#3}
}



% -- Frames with auto numbering -- %

% #1 : color
% #2 : left start corner
% #3 : right up   corner
% #4 : right down corner
\newcommand\aptreeFrame[4][]{%
    \ptreeFrame[#1]{!#2}{!#3}{!#4}%
}



% -- Focus with auto numbering -- %

\newcommand\aptreeFocus{\@ifstar{\tnsproba@ptree@focus@auto@star}{\tnsproba@ptree@focus@auto@no@star}}

\newcommand\tnsproba@ptree@focus@auto@star{\@ifstar{\tnsproba@ptree@focus@auto@star@star}{\tnsproba@ptree@focus@auto@star@no@star}}

% #1 : one node
\newcommand\tnsproba@ptree@focus@auto@abstract@node[2]{
	\node[draw       = \tnsproba@ptree@focus@color,
          line width = 1.5pt,
          inner sep  = 0pt,
          rounded corners,
          fit = (!#2)(!#2)(!#2)] {};
}


% #1 : number of the node
% #2 : the node
\newcommand\tnsproba@ptree@focus@auto@abstract@node@nostart[2]{
	\ifnum#1=1\else
    	\tnsproba@ptree@focus@auto@abstract@node{#1}{#2}
    \fi
}


% #1 : node1 | node2 | ...
\newcommand\tnsproba@ptree@focus@auto@abstract@multi@nodes[1]{
% Note
%
%    #1 : macro to apply
%    #2 : multi-args
	\tns@multi@apply@each{\tnsproba@ptree@focus@auto@abstract@node}%
		                 {#1}
}


\newcommand\tnsproba@ptree@focus@auto@abstract@multi@nodes@nostart[1]{
	\tns@multi@apply@each{\tnsproba@ptree@focus@auto@abstract@node@nostart}%
		                 {#1}
}



% #1 : number of the couple of nodes
% #2 : start of the edge
% #3 : end   of the edge
\newcommand\tnsproba@ptree@focus@auto@abstract@edge[3]{
    \draw[\tnsproba@ptree@focus@color,
          line cap   = round,
          line width = 1.5pt] 
    	 (!#2.parent anchor) -- (!#3.child anchor);
}


% #1 : node1 | node2 | ...
\newcommand\tnsproba@ptree@focus@auto@abstract@multi@edges[1]{
% Note
%
%    #1 : macro to apply
%    #2 : multi-args
	\tns@multi@apply@overlapping@couples{\tnsproba@ptree@focus@auto@abstract@edge}%
	                       {#1}
}



\setKVdefault[tnsproba@focus@auto@keys]{%
    col = blue
}

% #1 : color
% #2 : node1 | node2 | ...
\newcommand\tnsproba@ptree@focus@auto@star@no@star[2][]{
    \useKVdefault[tnsproba@focus@auto@keys]%
    \setKV[tnsproba@focus@auto@keys]{#1}%
    \edef\col{\useKV[tnsproba@focus@auto@keys]{col}}%
	\renewcommand\tnsproba@ptree@focus@color{\col}
	\tnsproba@ptree@focus@auto@abstract@multi@edges{#2}
	\tnsproba@ptree@focus@auto@abstract@multi@nodes@nostart{#2}
}

% #1 : color
% #2 : node1 | node2 | ...
\newcommand\tnsproba@ptree@focus@auto@no@star[2][]{
    \useKVdefault[tnsproba@focus@auto@keys]%
    \setKV[tnsproba@focus@auto@keys]{#1}%
    \edef\col{\useKV[tnsproba@focus@auto@keys]{col}}%
	\renewcommand\tnsproba@ptree@focus@color{\col}
	\tnsproba@ptree@focus@auto@abstract@multi@edges{#2}
	\tnsproba@ptree@focus@auto@abstract@multi@nodes{#2}
}

% #1 : color
% #2 : node1 | node2 | ...
\newcommand\tnsproba@ptree@focus@auto@star@star[2][]{
    \useKVdefault[tnsproba@focus@auto@keys]%
    \setKV[tnsproba@focus@auto@keys]{#1}%
    \edef\col{\useKV[tnsproba@focus@auto@keys]{col}}%
	\renewcommand\tnsproba@ptree@focus@color{\col}
	\tnsproba@ptree@focus@auto@abstract@multi@edges{#2}
}

