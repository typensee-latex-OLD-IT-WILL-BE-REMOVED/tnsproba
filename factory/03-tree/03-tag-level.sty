% == PACKAGES USED == %

\RequirePackage{simplekv}


% == DEFINITIONS == %

\setKVdefault[tnsproba@level@tag@keys]{%
    tcol = black,
    dx   = 0cm,
    dy   = 0cm
}


%    #1 : color
%
%    #2 : name of a node at the level wanted
%    #3 : tag

\newcommand\ptreeTag{\@ifstar{\ptree@tag@star}{\ptree@tag@no@star}}


\newcommand\ptree@tag@no@star[3][]{
    \useKVdefault[tnsproba@level@tag@keys]%
    \setKV[tnsproba@level@tag@keys]{#1}%
    \edef\tcol{\useKV[tnsproba@level@tag@keys]{tcol}}%
    \edef\dx{\useKV[tnsproba@level@tag@keys]{dx}}%
    \edef\dy{\useKV[tnsproba@level@tag@keys]{dy}}%
	%
	\node[anchor = north,
	      xshift = \dx,
	      yshift = \dy + .75cm]
	at (#2.mid |- ptreetag coord) {\textcolor{\tcol}{#3}};
}


\newcommand\ptree@tag@star[3][]{
    \useKVdefault[tnsproba@level@tag@keys]%
    \setKV[tnsproba@level@tag@keys]{#1}%
    \edef\tcol{\useKV[tnsproba@level@tag@keys]{tcol}}%
    \edef\dx{\useKV[tnsproba@level@tag@keys]{dx}}%
    \edef\dy{\useKV[tnsproba@level@tag@keys]{dy}}%
	%
	\node[anchor = south,
	      xshift = \dx,
	      yshift = \dy - .75cm]
	at (#2.mid |- ptreetag* coord) {\textcolor{\tcol}{#3}};
}
