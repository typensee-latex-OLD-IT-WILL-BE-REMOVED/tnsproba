%\documentclass[12pt,a4paper]{scrartcl}
\documentclass[12pt,a4paper]{article}

\makeatletter % Technical doc - START

% ---------------------- %
% -- GENERAL SETTINGS -- %
% ---------------------- %

\usepackage[
	top    = 2cm,
	bottom = 2cm,
	left   = 1.5cm,
	right  = 1.5cm
]{geometry}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{ucs}

\usepackage[french]{babel,varioref}

\usepackage{color}
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor = black,
    filecolor = black,
    linkcolor = black,
    urlcolor  = black
}
\usepackage[numbered]{bookmark}

\usepackage{enumitem}
\usepackage{multicol}
\usepackage{makecell}

\setlength{\parindent}{0cm}
\setlist{noitemsep}



% --------------- %
% -- TOC & Co. -- %
% --------------- %

\usepackage[raggedright]{titlesec}

%\renewcommand\thechapter{\Alph{chapter}.}
\renewcommand\thesection{\Roman{section}.}
\renewcommand\thesubsection{\arabic{subsection}.}
\renewcommand\thesubsubsection{\roman{subsubsection}.}


\titleformat{\paragraph}[hang]{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}{0pt}{3.25ex plus 1ex minus .2ex}{0.5em}


% Source
%    * https://tex.stackexchange.com/a/558025/6880
\usepackage{tocbasic}[2020/07/22]% needs KOMA-Script version 3.31

\DeclareTOCStyleEntries[
    raggedentrytext,
    linefill = \hfill,
    indent   = 0pt,
    dynindent,
    numwidth = 0pt,
    numsep   = 1ex,
    dynnumwidth
]{tocline}{
	chapter,
	section,
	subsection,
	subsubsection,
	paragraph,
	subparagraph
}

\DeclareTOCStyleEntry[indentfollows = chapter]{tocline}{section}



% ----------- %
% -- TOOLS -- %
% ----------- %

\usepackage{ifplatform}
\usepackage{ifthen}
\usepackage{macroenvsign}
\usepackage{pgffor}



% ------------------------- %
% -- SPECIAL FORMATTINGS -- %
% ------------------------- %

\usepackage{amsthm}

\usepackage{tcolorbox}


% -- LISTINGS -- %

%\tcbuselibrary{listingsutf8}
\tcbuselibrary{minted, breakable}

\newtcblisting{latexex}{%
    breakable,
    sharp corners,%
    left   = 1mm, right = 1mm,%
    bottom = 1mm, top   = 1mm,%
    %colupper = red!75!blue,%
    listing side text
}

\newtcbinputlisting{\inputlatexex}[2][]{%
    listing file={#2},%
    breakable,
    sharp corners,%
    left   = 1mm, right = 1mm,%
    bottom = 1mm, top   = 1mm,%
    %colupper = red!75!blue,%
    listing side text
}


\newtcblisting{latexex-flat}{%
    breakable,
    sharp corners,%
    left   = 1mm, right = 1mm,%
    bottom = 1mm, top   = 1mm,%
    %colupper = red!75!blue,%
}

\newtcbinputlisting{\inputlatexexflat}[2][]{%
    listing file={#2},%
    breakable,
    sharp corners,%
    left   = 1mm, right = 1mm,%
    bottom = 1mm, top   = 1mm,%
    %colupper = red!75!blue,%
}


\newtcblisting{latexex-alone}{%
    breakable,
    sharp corners,%
    left   = 1mm, right = 1mm,%
    bottom = 1mm, top   = 1mm,%
    %colupper = red!75!blue,%
    listing only
}

\newtcbinputlisting{\inputlatexexalone}[2][]{%
    listing file={#2},%
    breakable,
    sharp corners,%
    left   = 1mm, right = 1mm,%
    bottom = 1mm, top   = 1mm,%
    %colupper = red!75!blue,%
    listing only
}


\newcommand\inputlatexexcodeafter[1]{%
    \begin{center}
        \input{#1}
    \end{center}

    \vspace{-.5em}
    
    Le rendu précédent a été obtenu via le code suivant.
    
    \inputlatexexalone{#1}
}


\newcommand\inputlatexexcodebefore[1]{%
    \inputlatexexalone{#1}
    \vspace{-.75em}
    \begin{center}
        \textit{\footnotesize Rendu du code précédent}
        
        \medskip
        
        \input{#1}
    \end{center}
}


% -- REMARK -- %

\theoremstyle{definition}
\newtheorem*{remark}{Remarque}


% -- EXAMPLE -- %

\newcounter{paraexample}[subsubsection]

\newcommand\@newexample@abstract[2]{%
    \paragraph{%
        #1%
        \if\relax\detokenize{#2}\relax\else {} -- #2\fi%
    }%
}

\newcommand\newparaexample{\@ifstar{\@newparaexample@star}{\@newparaexample@no@star}}

\newcommand\@newparaexample@no@star[1]{%
    \refstepcounter{paraexample}%
    \@newexample@abstract{Exemple \theparaexample}{#1}%
}

\newcommand\@newparaexample@star[1]{%
    \@newexample@abstract{Exemple}{#1}%
}


% -- CHANGE LOG -- %

\newcommand\topic{\@ifstar{\@topic@star}{\@topic@no@star}}

\newcommand\@topic@no@star[1]{%
    \textbf{\textsc{#1}.}%
}

\newcommand\@topic@star[1]{%
    \textbf{\textsc{#1} :}%
}


% -- ABOUT MACROS & Co. -- %

\newcommand\env[1]{\texttt{#1}}
\newcommand\macro[1]{\env{\textbackslash{}#1}}

\newcommand\separation{
    \medskip
    \hfill\rule{0.5\textwidth}{0.75pt}\hfill
    \medskip
}


\newcommand\extraspace{
    \vspace{0.25em}
}


\newcommand\whyprefix[2]{%
    \textbf{\prefix{#1}}-#2%
}

\newcommand\mwhyprefix[2]{%
    \texttt{#1 = #1-#2}%
}

\newcommand\prefix[1]{%
    \texttt{#1}%
}


\newcommand\inenglish{\@ifstar{\@inenglish@star}{\@inenglish@no@star}}

\newcommand\@inenglish@star[1]{%
    \emph{\og #1 \fg}%
}

\newcommand\@inenglish@no@star[1]{%
    \@inenglish@star{#1} en anglais%
}


\newcommand\ascii{\texttt{ASCII}}

\makeatother % Technical doc - END


\usepackage{tnsproba}


\begin{document}

\renewcommand\labelitemi{\raisebox{0.125em}{\tiny\textbullet}}
\renewcommand{\labelitemii}{---}

\title{  %
	Le package \texttt{tnsproba}:\\%
	parler des probabilités facilement\\%
	{\footnotesize Code source disponible sur \url{https://github.com/typensee-latex/tnsproba.git}.}\\%
{\footnotesize Version \texttt{0.8.0-beta} développée et testée sur \macosxname{}.}%
}
\author{Christophe BAL}
\date{2020-08-10}

\maketitle


\vspace{2em}

\hrule

\tableofcontents

\vspace{1.5em}

\hrule

\newpage

\section{Introduction}

Le package \verb+tnsproba+ propose des macros utiles quand l'on parle de probabilités. La saisie se veut sémantique et simple.


% tnscom used - START
\section{Beta-dépendance}

\verb#tnscom# qui est disponible sur \url{https://github.com/typensee-latex/tnscom.git} est un package utilisé en coulisse.
% tnscom used - END
% List of packages - START
\section{Packages utilisés}

La roue ayant déjà été inventée, le package \verb#tnsproba# réutilise les packages suivants sans aucun scrupule.

\begin{multicols}{4}
    \begin{itemize}
        \item \verb#amsmath#
        \item \verb#forest#
        \item \verb#simplekv#
        \item \verb#xstring#
    \end{itemize}
\end{multicols}
% List of packages - END
\section{Ensembles probabilistes}

Le package \verb+tnssets+ propose la macro \macro{setproba} pour indiquer des ensembles de type probabiliste.
Se rendre sur \url{https://github.com/typensee-latex/tnssets.git} si cela vous intéresse.
\section{Généralités}

\subsection{Probabilité \og simple \fg}

\newparaexample{}

\begin{latexex}
$\proba{A}$
\end{latexex}


% ---------------------- %


\newparaexample{Choisir le nom de la probabilité}

\begin{latexex}
$\proba[P]{A}$
\end{latexex}


% ---------------------- %


\subsection{Probabilité conditionnelle}

\newparaexample{Les deux écritures classiques}

La 1\iere{} notation, qui est devenue standard, permet de comprendre l'ordre des arguments.
\begin{latexex}
 $\probacond {B}{A}
= \probacond*{B}{A}$
\end{latexex}


% ---------------------- %


\newparaexample{Obtenir la formule de définition}

Le préfixe \prefix{e} est pour \whyprefix{e}{xpand} soit \inenglish{développer}
\footnote{
	Pour ne pas alourdir l'utilisation de \macro{probacond}, il a été choisi d'utiliser un préfixe au lieu d'un système de multi-options.
}.

\begin{latexex}
 $\eprobacond {B}{A}
= \eprobacond*{B}{A}$
\end{latexex}


% ---------------------- %


\newparaexample{Choisir le nom de la probabilité}

\begin{latexex}
 $\probacond  [P]{B}{A}
= \probacond* [P]{B}{A}
= \eprobacond*[P]{B}{A}
= \eprobacond [P]{B}{A}$
\end{latexex}


% ---------------------- %
%\section{Généralités}

\subsection{Évènement contraire}

\macro{nevent} vient de \whyprefix{n}{ot} \prefix{event} qui est une pseudo-traduction de \inenglish{évènement contraire}.
\begin{latexex}
$\nevent{A}$
\end{latexex}


% ---------------------- %
%\section{Généralités}

\subsection{Espérance, variance et écart-type}

\newparaexample{Espérance}

\macro{expval} vient de \whyprefix{exp}{ected} \whyprefix{val}{ue} soit \inenglish{espérance}.
\begin{latexex}
$\expval{X}$
\end{latexex}


% ---------------------- %


\newparaexample{Choisir le nom de l'espérance}

\begin{latexex}
$\expval[E_1]{X}$
\end{latexex}


% ---------------------- %


\newparaexample{Variance}

\begin{latexex}
$\var   {X}$ ou
$\var[v]{X}$
\end{latexex}


% ---------------------- %


\newparaexample{Écart-type}

\macro{stddev} vient de \whyprefix{st}{andar-}\prefix{d} \whyprefix{dev}{iation} soit \inenglish{écart-type}.
\begin{latexex}
$\stddev   {X}$ ou
$\stddev[s]{X}$
\end{latexex}


% ---------------------- %
\section{Arbres pondérés}

\subsection{Au commencement était la forêt...}

Le gros du travail est fait par le package \verb+forest+ qui s'appuie \verb+TikZ+ dont on peut utiliser toute la machinerie afin d'obtenir des choses sympathiques comme ci-dessous et ceci à moindre coût neuronal comme vont le montrer les explications données dans les sections suivantes.

\inputlatexexcodeafter{TikZ/probatree-showcase.tkz}


\begin{remark}
	Jusqu'à la section \ref{tnsproba-autonum-forest} page \pageref{tnsproba-autonum-forest}, nous nommerons à la main les noeuds des arbres via \verb#name = ...# lorsque cela sera nécessaire.
	Dans la section indiquée nous verrons comment utiliser les noms automatiques donnés par le package \verb#forest#.
\end{remark}
%\section{Arbres pondérés}

\subsection{Les bases}

\newparaexample{Le cas type}

Commençons par un arbre nu pour voir comment utiliser l'environnement \verb+probatree+ qui s'appuie en coulisse sur celui nommé \verb+forest+ du package éponyme.
L'exemple qui suit utilise juste les réglages spécifiques de mise en forme de l'arbre qui sont propres à \verb+probatree+.

\inputlatexex{TikZ/probatree-undecorated.tkz}


% ---------------------- %


\newparaexample{Ajouter des pondérations}

Dans le code suivant, ce sont les clés
\footnote{
	En fait du point de vue de TikZ, ce sont des styles.
}
\verb+pweight+, \verb+apweight+ et \verb+bpweight+ qui facilitent l'écriture des pondérations sur les branches.
Indiquons que \prefix{pweight} vient de \whyprefix{p}{robability} et \prefix{weight} soit \inenglish*{probabilité} et \inenglish{poids}.
Quant au \prefix{a} et au \prefix{b} au début de \prefix{apweight} et \prefix{bpweight} respectivement, ils viennent de \whyprefix{a}{bove} et \whyprefix{b}{elow} soit \inenglish*{dessus} et \inenglish{dessous}.

\inputlatexex{TikZ/probatree-weight-placement.tkz}


\begin{remark}
	Notez que le mode mathématique est activé par défaut pour les noms des noeuds et les poids comme le montre l'exemple improbable
	\footnote{
		Quoique...
	}
	ci-dessous.

	\inputlatexex{TikZ/probatree-math-mode.tkz}
\end{remark}


% ---------------------- %


\newparaexample{Des poids cachés partout}

On peut cacher tous les poids via l'environnement étoilé \verb+probatree*+ sans avoir à les effacer partout dans le code \LaTeX{} \emph{(ceci peut être utile lors de la rédaction d'exercices)}.

\inputlatexex{TikZ/probatree-weight-hide-all.tkz}


% ---------------------- %


\newparaexample{Des poids cachés localement}

Pour ne cacher que certains poids afin de produire par exemple un arbre à compléter, il faudra utiliser localement le style \verb+pweight*+ comme dans l'exemple ci-dessous.

\inputlatexex{TikZ/probatree-weight-hide-locally.tkz}


% ---------------------- %


\newparaexample{Forcer l'affichage des poids cachés localement}

Imaginons que nous voulions donner l'arbre précédent avec tous ses poids.
Il suffit dans ce cas de passer via l'environnement doublement étoilé \verb+probatree**+ qui affichera absolument tous les poids \emph{(on tape une fois et on réutilise le même code dans deux contextes différents)}.

\inputlatexex{TikZ/probatree-weight-show-all.tkz}


% ---------------------- %


\newparaexample{Un signe $=$ et/ou une virgule dans les étiquettes}

Vous ne pouvez pas utiliser directement un signe $=$ ou une virgule dans les étiquettes des branches
\footnote{
	Ces deux symboles font partie de la syntaxe TikZ.
}.
Pour contourner cette limitation, il suffit de mettre le contenu de l'étiquette entre des accolades.

\inputlatexex{TikZ/probatree-weight-coma-equal.tkz}
%\section{Arbres pondérés}

\subsection{Commenter les feuilles}

\newparaexample{Tout aligner}

Que ce soit pour expliquer un arbre de probabilité, ou bien pour raisonner sur ce dernier, l'effet suivant est très utile
\footnote{
	Le package \texttt{forest} permet d'indiquer directement des mises en forme dans le code de l'arbre.
	L'auteur du présent package trouve bien plus efficace à l'usage de ne pas toucher au code minimal d'un arbre.
	Ceci explique donc le choix retenu de donner les décorations supplémentaires après le code de l'arbre.
}.
Noter l'utilisation possible de la clé \verb#col# pour \whyprefix{col}{or} afin d'indiquer une couleur au format TikZ.
La couleur oar défaut est le noir. 


\inputlatexexflat{tikz/probatree-comment.tkz}


\begin{remark}
	Commenter un noeud interne ne provoquera pas d'erreur même si \macro{ptreeComment} n'a pas été conçu pour ceci.
	Ceci a été utilisé dans l'exemple d'introduction mais ça reste un petit hack.
\end{remark}


% ---------------------- %


\newparaexample{Coller au plus près}

En utilisant \macro{ptreeComment*} au lieu de \macro{ptreeComment}, les commentaires seront proches des noeuds et donc non alignés verticalement. 
Avec l'exemple précédent on obtient la mise en forme qui suit.

\medskip

\input{tikz/probatree-comment-leftmost.tkz}


% ---------------------- %


\newparaexample{Décalages horizontal et vertical -- Avec des variables aléatoires}

Grâce aux clés \verb#dx# et \verb#dy# il est possible d'ajouter des décalages horizontal et vertical. Ceci permet d'obtenir ce qui suit sans trop se fatiguer les méninges.

\input{tikz/probatree-comment-dx-dy.tkz}


Le code utilisé est le suivant.
Notez qu'ici il y a des réglages à faire au doigt mouillé.
Dans l'exemple suivant nous allons voir comment se passer des horribles copier-coller.

\inputlatexexalone{tikz/probatree-comment-dx-dy-short.tkz}


% ---------------------- %


\newparaexample{Commenter via une boucle -- Avec des variables aléatoires}

Dans le code précédent nous avons dû faire des copier-coller. La macro \macro{foreach} de TikZ permet d'éviter cela afin d'obtenir un code très facile à maintenir et à comprendre comme celui ci-après. Ceci étant indiqué, il y a des pièges à éviter comme nous l'expliquons juste après.

% -- DEBUG - TO KEEP ! - START -- %
%\input{tikz/probatree-comment-foreach.tkz}
% -- DEBUG - TO KEEP ! - END -- %

\inputlatexexalone{tikz/probatree-comment-foreach-short.tkz}

Voici les pièges à éviter.

\begin{enumerate}
	\item \macro{foreach} ignore les espace initiaux mais pas les finaux. Si vous utilisez \verb#nB /$1$# au lieu de  \verb#nB/$1$# alors la macro croira que le nom se finit par un espace et \verb#forest# ne pourra rien faire. 

	\item Les noms \macro{color}, \macro{col}, \macro{dx} et \macro{dy} sont utilisés en coulisse donc vous ne pourrez pas les utiliser dans votre boucle.
\end{enumerate}
%\section{Arbres pondérés}

\subsection{Avec des cadres}

\newparaexample{Des cadres finaux}

Via la clé \verb#pframe# il est très aisé d'encadrer un sous-arbre final
\footnote{ 
	Un sous-arbre sera dit final si toutes ses feuilles correspondent à des feuilles de l'arbre initial. 
}
comme le montre l'exemple suivant
\footnote{ 
	Ce type de cadre est très utile d'un point de vue pédagogique. 
}.
Dans l'exemple ci-après nous utilisons la bidouille \verb+{},s sep = 1.3cm+ qui évite que les cadres se superposent.

\inputlatexex{tikz/probatree-frame-final.tkz}


\begin{remark}
	La clé \verb#pframe# est un cas particulier de décoration car les autres décorations se font en dehors de la définition de l'arbre
\end{remark}
%\begin{remark}
%	La clé \verb#pframe# est l'un des deux cas particuliers de décoration car la majorité des décorations se font en dehors de la définition de l'arbre
%\end{remark}


% ---------------------- %


\newparaexample{Des cadres non finaux}

La macro \macro{ptreeFrame} permet facilement d'encadrer un sous-arbre non final.
Ceci nécessite d'utiliser des noms de noeuds.
Voici un exemple où la macro \macro{ptreeFrame} attend les noms de la racine et des deux noeuds finaux le plus haut et le plus bas.

\inputlatexex{tikz/probatree-frame-not-final.tkz}
%\section{Arbres pondérés}

\subsection{Mettre en valeur des chemins}

\newparaexample{Juste avec deux noeuds}

Il est relativement aisé de mettre en valeur un chemin particulier comme dans l'exemple ci-après qui est une simple démo. montrant les différences entre \macro{ptreeFocus},  \macro{ptreeFocus*} et \macro{ptreeFocus**}.
Notez que les noms des noeuds sont séparés par des barres verticales \verb#|# et  qu'il est possible d'utiliser des espaces pour améliorer la lisibilité du code. 

\inputlatexex{tikz/probatree-focus-edge.tkz}

Voici ce qu'il faut retenir.

\begin{enumerate}
	\item \macro{ptreeFocus} encadre tous les noeuds.

	\item \macro{ptreeFocus*} n'encadre pas le tout premier noeud \emph{(typiquement cela est utile pour un chemin partant de la racine de l'arbre si celle-ci n'est pas nommée comme on le fait très souvent)}.

	\item \macro{ptreeFocus**} n'encadre aucun des noeuds.
	
	\item La couleur peut être changée via l'argument optionnel en utilisant les couleurs de type TikZ. Par défaut le bleu est utilisé.
\end{enumerate}


\begin{remark}
	Le fonctionnement interne de \verb#forest# empêche une coloration automatique des noeuds.
	Si vous souhaitez obtenir cet effet il faudra ajouter les couleurs à la main pour chaque noeud comme dans l'exemple qui suit.

	\inputlatexex{tikz/probatree-focus-edge-color-nodes.tkz}
\end{remark}


% ---------------------- %


\newparaexample{Plusieurs noeuds d'un coup}

Rien de bien compliqué à condition de bien respecter l'ordre de saisie des noeuds.

\inputlatexexflat{tikz/probatree-focus-edge-long-star.tkz}


Avec \macro{ptreeFocus} on obtient l'arbre suivant où le mini disque initial
\footnote{
	Ce disque est en fait un carré aux coins arrondis autour d'un texte vide.
}
n'est pas forcément souhaité.

\input{tikz/probatree-focus-edge-long-no-star.tkz}


Avec \macro{ptreeFocus**} on obtient l'arbre ci-dessous.

\input{tikz/probatree-focus-edge-long-star-star.tkz}


% ---------------------- %


%\newparaexample{De la racine à un noeud}

%Comme il est très courant de vouloir indiquer un chemin de la racine à une feuille, cette fonctionnalité est proposée par le package via les macros \macro{aptreeFocusAll},  \macro{aptreeFocusAll*} et \macro{aptreeFocusAll**} qui prennent comme unique argument obligatoire le noeud final du chemin
%\footnote{
%	Rien n'interdit de prendre un noeud interne au lieu d'u racine même si cela ne semble pas très utile a priori.
%}
%indiqué via le nom automatique fourni par \verb#forest#.
%On peut alors utiliser le code suivant très rapide à taper : voir la section \ref{tnsproba-autonum-forest} page \pageref{tnsproba-autonum-forest} où est expliqué d'où vient le nom \verb#!xxxxx# utilisé ci-après.
%

%\inputlatexexflat{tikz/probatree-focus-edge-all.tkz}
%\splitit{1312}


%\begin{remark}
%	La clé \verb#pfocus# est le 2\iem{} cas particulier de décoration avec \verb#pframe# car les autres décorations se font en dehors de la définition de l'arbre.
%\end{remark}
%\section{Arbres pondérés}

\subsection{Utiliser les noms automatiques donnés par \texttt{forest}} \label{tnsproba-autonum-forest}

Voyons comment obtenir le résultat suivant en indiquant tous les noeuds via les noms automatiques fabriqués par \verb@forest@.
%\footnote{
%	Le même rendu peut se taper bien plus efficacement via la macro à un argument \macro{ptreeFocusAll*} comme cela est expliqué dans la section précédente.
%}.

\inputlatexexcodeafter{tikz/probatree-autonum.tkz}


Voici comment s'y prendre.

\begin{enumerate}
	\item On utilise \macro{aptreeFocus} au lieu de \macro{ptreeFocus} où le préfixe \prefix{a} est pour \whyprefix{a}{uto}.
	      De façon similaire il existe les macros  \macro{aptreeComment} et  \macro{aptreeFrame}.


	\item Chaque nom automatique fabriqué par \verb#forest# commence par \texttt{!} . Ce caractère spécial n'est pas à indiquer car il sera ajouté automatiquement en coulisse.

	
	\item La racine est nommée \texttt{!} par \verb#forest# d'où le \verb#|# seul au début de l'argument de \macro{aptreeFocus*} ci-dessus afin d'indiquer un texte vide comme tout premier noeud.

	
	\item Pour voir ce qu'il faut faire pour un noeud autre que la racine, considérons par exemple \texttt{1321}. On indique en fait le chemin à suivre après la racine pour arriver au noeud voulu.
	\begin{itemize}
		\item Aller d'abord au \fbox{1}\,\ier{} noeud du niveau 1 qui ici est $A$.

		\item Aller ensuite au \fbox{3}\,\ieme{} noeud du niveau 2 qui ici est $D$.

		\item Aller après au \fbox{2}\,\ieme{} noeud du niveau 3 qui ici est $F$.
		
		\item Aller enfin au \fbox{1}\,\ier{} noeud du niveau 4 qui ici est $G$. C'est notre noeud nommé \fbox{\texttt{1321}}.
	\end{itemize}
\end{enumerate}


\begin{remark}
	Utilisez de préférence les noms automatiques car cela facilitera la maintenance de vos arbres sur le long terme.
	Si on reprend le tout premier exemple d'arbre décoré, il est bien plus simple de faire comme suit car on ne touche pas à la structure minimale du code de l'arbre.
	A titre illustratif on a utilisé \macro{ptreeFrame} au lieu de la clé \verb#pframe# directement dans l'arbre.
	
	\inputlatexexflat{tikz/probatree-showcase-autonum.tkz}
\end{remark}
%\section{Arbres pondérés}
\newpage

\section{Historique}

Nous ne donnons ici qu'un très bref historique récent
\footnote{
	On ne va pas au-delà de un an depuis la dernière version.
}
de \verb+tnsproba+ à destination de l'utilisateur principalement.
Tous les changements sont disponibles uniquement en anglais dans le dossier \verb+change-log+ : voir le code source de \verb+tnsproba+ sur \verb+github+.

\begin{description}
% Changes shown - START

    \medskip
    \item[2020-08-10] Nouvelle version mineure \verb+0.8.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic*{Arbre de probabilités}
              le mode mathématique est activé par défaut pour les noms des noeuds et les poids \emph{(plus besoin de taper plein de \texttt{\$})}.
    \end{itemize}
    
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-08-09] Nouvelle version mineure \verb+0.7.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic{Arbre de probabilités}
        \begin{itemize}[itemsep=.5em]
            \item Utilisation obligatoire de \verb#col=...# pour indiquer une couleur à toutes les macros de décoration.
            
            \item Les macros \macro{ptreeComment}, \macro{ptreeComment*}, 
                  \macro{aptreeComment} et \macro{aptreeComment*}
                  ont deux clés \verb#dx# et \verb#dy# pour indiquer un décalage relatif.
            
            \item Ajout de l'environnement \env{probatree**} qui force l'affichage de tous les poids !
        \end{itemize}
    \end{itemize}
    
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-08-08] Nouvelle version mineure \verb+0.6.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic{Arbre de probabilités}
        \begin{itemize}[itemsep=.5em]
            \item \macro{aptreeFocus}, \macro{aptreeFocus*} et \macro{aptreeFocus**} permettent d'utiliser le système de nommage automatique des noeuds proposé par \verb#forest#.
            
            \item Il en va de même pour \macro{aptreeComment} et \macro{aptreeFrame}.
        \end{itemize}
    \end{itemize}
    
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-08-05] Nouvelle version mineure \verb+0.5.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic{Arbre de probabilités}
        \begin{itemize}[itemsep=.5em]
            \item \macro{ptreeFocus}, \macro{ptreeFocus*} et \macro{ptreeFocus**} fonctionnent avec un multi-argument pour pourvoir indiquer un chemin sur plusieurs noeuds.
            
            \item Suppression de la clé \macro{pcomment}.
            
            \item Ajout des macros \macro{ptreeComment} et \macro{ptreeComment*} qui simplifient la saisie.
        \end{itemize}
    \end{itemize}
    
    \separation

% ------------------------ %

    \medskip
    \item[2020-07-31] Nouvelle version mineure \verb+0.4.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic*{Arbre}
        	  possibilité de mettre en valeur un chemin via \macro{ptreeFocus},  \macro{ptreeFocus*} ou \macro{ptreeFocus**}.
    \end{itemize}
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-07-25] Nouvelle version mineure \verb+0.3.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic{Arbre}
        \begin{itemize}[itemsep=.5em]
            \item Ajout du style \prefix{pcomment} pour placer du texte à la droite d'une feuille.
    
            \item Le style \prefix{frame} a été renommé \prefix{pframe}.
        \end{itemize}
    \end{itemize}
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-07-23] Nouvelle version mineure \verb+0.2.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic*{Arbre}
              ajout de la macro \macro{ptreeFrame} pour tracer facilement des sous cadres non \og finaux \fg.
    \end{itemize}
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-07-22] Nouvelle version mineure \verb+0.1.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic*{Probabilité conditionnelle}
              \macro{probacondexp} renommée en  \macro{eprobacond}.
    
        \item \topic*{Évènement contraire}
              ajout de \macro{nevent}.
    
        \item \topic*{variance et écart-type}
              ajout de \macro{var} et \macro{stddev}.
    \end{itemize}
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-07-10] Première version \verb+0.0.0-beta+.
% ------------------------ %

% Changes shown - END 
\end{description}


\newpage
\section{Toutes les fiches techniques} \label{techincal-ids}












\subsection{Généralités}

\subsubsection{Probabilité \og simple \fg}



\IDmacro{proba}{1}{1}

\IDoption{} le nom de la probabilité. La valeur par défaut est $p$.

\IDarg{} l'ensemble dont on veut calculer la probabilité.


% ---------------------- %


\subsubsection{Probabilité conditionnelle}



\IDmacro{probacond  }{1}{2}

\IDmacro{probacond* }{1}{2}

\extraspace

\IDmacro{eprobacond }{1}{2}

\IDmacro{eprobacond*}{1}{2}


\IDoption{} le nom de la probabilité. La valeur par défaut est $p$.

\IDarg{1} l'ensemble qui donne la condition.

\IDarg{2} l'ensemble dont on veut calculer la probabilité.


\subsubsection{Évènement contraire}



\IDmacro[a]{nevent}{1}

\IDarg{} l'ensemble dont on veut indiquer le contraire.


\subsubsection{Espérance, variance et écart-type}



\IDmacro{expval}{1}{1}

\IDoption{} le nom de la fonction espérance. La valeur par défaut est $\mathrm{E}$ obtenue via \verb#\mathrm{E}#.

\IDarg{} la variable aléatoire dont on veut calculer l'espérance.


\separation


\IDmacro{var}{1}{1}

\IDoption{} le nom de la fonction variance. La valeur par défaut est $\mathrm{V}$ obtenue via \verb#\mathrm{V}#.

\IDarg{} la variable aléatoire dont on veut calculer la variance.


\separation


\IDmacro{stddev}{1}{1}

\IDoption{} le nom de la fonction écart-type. La valeur par défaut est $\sigma$ obtenue via \verb#\sigma#.

\IDarg{} la variable aléatoire dont on veut calculer l'écart-type.




















\subsection{Arbres pondérés}



\IDenv[n]{probatree}

\IDenv[n]{probatree*}

\IDenv[n]{probatree**}

\Content{} un arbre codé en utilisant la syntaxe supportée par le package \verb#forest#.

\extraspace

\IDkey{pweight}  pour écrire un poids sur le milieu d'une branche.

\IDkey{apweight} pour écrire un poids au-dessus le milieu d'une branche.

\IDkey{bpweight} pour écrire un poids en-dessous du milieu d'une branche.

\extraspace

\IDkey{pweight*} pour indiquer un poids sans l'imprimer.
Dans l'environnement \env{probatree**}, le poids sera affiché comme si on avait utilisé \verb#pweight#.

\IDkey{apweight*} pour indiquer un poids sans l'imprimer.
Dans l'environnement \env{probatree**}, le poids sera affiché comme si on avait utilisé \verb#apweight#.

\IDkey{bpweight*} pour indiquer un poids sans l'imprimer.
Dans l'environnement \env{probatree**}, le poids sera affiché comme si on avait utilisé \verb#bpweight#.

\extraspace

\IDkey{pframe} pour encadrer un sous-arbre depuis un noeud vers toutes les feuilles de celui-ci.


\separation


\IDmacro{ptreeFrame}{1}{3} \hfill \mwhyprefix{p}{robabilty}

\IDoption{} un système de type \texttt{clé=valeur}.

\begin{enumerate}
	\item \verb#col# : une couleur au format TikZ. La valeur par défaut est \verb#blue#.
\end{enumerate}


\IDargs{1..3} les noms de la sous-racine (à gauche), du noeud final en haut (à droite) et du noeud final en bas (à droite) tous indiqués via \verb#name = ...# \emph{(en fait l'ordre n'est pas important ici)}.


\separation


\IDmacro{aptreeFrame}{1}{3} \hfill \mwhyprefix{a}{auto}

\extraspace
\extraspace

Voir les indications précédentes excepté qu'ici on utilise le système de nommage automatisé dérivé de celui de \verb#forest#.


\separation


\IDmacro{ptreeComment}{1}{2}

\IDoption{} un système de type \texttt{clé=valeur}.

\begin{enumerate}
	\item \verb#col# : une couleur au format TikZ. La valeur par défaut est \verb#black#.

	\item \verb#dx# : une distance horizontale relative de décalage. La valeur par défaut est \verb#0cm#.

	\item \verb#dy# : une distance verticale relative de décalage. La valeur par défaut est \verb#0cm#.
\end{enumerate}

\IDarg{1} le nom de la feuille.

\IDarg{2} le texte du commentaire.


\separation


\IDmacro{aptreeComment}{1}{2}

\extraspace
\extraspace

Voir les indications précédentes excepté qu'ici on utilise le système de nommage automatisé dérivé de celui de \verb#forest#.


\separation


\IDmacro{ptreeFocus  }{1}{1}

\IDmacro{ptreeFocus* }{1}{1}

\IDmacro{ptreeFocus**}{1}{1}

\IDoption{} un système de type \texttt{clé=valeur}.

\begin{enumerate}
	\item \verb#col# : une couleur au format TikZ. La valeur par défaut est \verb#blue#.
\end{enumerate}

\IDarg{} les noms des noeuds indiqués via \verb#name = ...# à fournir dans le bon ordre et à séparer par des barres verticales \verb#|#.


\separation


\IDmacro{aptreeFocus  }{1}{1}

\IDmacro{aptreeFocus* }{1}{1}

\IDmacro{aptreeFocus**}{1}{1}

\extraspace
\extraspace

Voir les indications précédentes excepté qu'ici on utilise le système de nommage automatisé dérivé de celui de \verb#forest#.




\end{document}
