%\documentclass[12pt,a4paper]{scrartcl}
\documentclass[12pt,a4paper]{article}

\makeatletter % Technical doc - START

% ---------------------- %
% -- GENERAL SETTINGS -- %
% ---------------------- %

\usepackage[
	top    = 2cm,
	bottom = 2cm,
	left   = 1.5cm,
	right  = 1.5cm
]{geometry}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{ucs}

\usepackage[french]{babel,varioref}

\usepackage{color}
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor = black,
    filecolor = black,
    linkcolor = black,
    urlcolor  = black
}
\usepackage[numbered]{bookmark}

\usepackage{enumitem}
\usepackage{multicol}
\usepackage{longtable}
\usepackage{makecell}

\setlength{\parindent}{0cm}
\setlist{noitemsep}



% --------------- %
% -- TOC & Co. -- %
% --------------- %

\usepackage[raggedright]{titlesec}

%\renewcommand\thechapter{\Alph{chapter}.}
\renewcommand\thesection{\Roman{section}.}
\renewcommand\thesubsection{\arabic{subsection}.}
\renewcommand\thesubsubsection{\roman{subsubsection}.}


\titleformat{\paragraph}[hang]{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}{0pt}{3.25ex plus 1ex minus .2ex}{0.5em}


% Source
%    * https://tex.stackexchange.com/a/558025/6880
\usepackage{tocbasic}[2020/07/22]% needs KOMA-Script version 3.31

\DeclareTOCStyleEntries[
    raggedentrytext,
    linefill = \hfill,
    indent   = 0pt,
    dynindent,
    numwidth = 0pt,
    numsep   = 1ex,
    dynnumwidth
]{tocline}{
	chapter,
	section,
	subsection,
	subsubsection,
	paragraph,
	subparagraph
}

\DeclareTOCStyleEntry[indentfollows = chapter]{tocline}{section}



% ----------- %
% -- TOOLS -- %
% ----------- %

\usepackage{ifplatform}
\usepackage{ifthen}
\usepackage{macroenvsign}
\usepackage{pgffor}



% ------------------------- %
% -- SPECIAL FORMATTINGS -- %
% ------------------------- %

\usepackage{amsthm}

\usepackage{tcolorbox}


% -- LISTINGS -- %

%\tcbuselibrary{listingsutf8}
\tcbuselibrary{minted, breakable}

\newtcblisting{latexex}{%
    breakable,
    sharp corners,%
    left   = 1mm, right = 1mm,%
    bottom = 1mm, top   = 1mm,%
    %colupper = red!75!blue,%
    listing side text
}

\newtcbinputlisting{\inputlatexex}[2][]{%
    listing file={#2},%
    breakable,
    sharp corners,%
    left   = 1mm, right = 1mm,%
    bottom = 1mm, top   = 1mm,%
    %colupper = red!75!blue,%
    listing side text
}


\newtcblisting{latexex-flat}{%
    breakable,
    sharp corners,%
    left   = 1mm, right = 1mm,%
    bottom = 1mm, top   = 1mm,%
    %colupper = red!75!blue,%
}

\newtcbinputlisting{\inputlatexexflat}[2][]{%
    listing file={#2},%
    breakable,
    sharp corners,%
    left   = 1mm, right = 1mm,%
    bottom = 1mm, top   = 1mm,%
    %colupper = red!75!blue,%
}


\newtcblisting{latexex-alone}{%
    breakable,
    sharp corners,%
    left   = 1mm, right = 1mm,%
    bottom = 1mm, top   = 1mm,%
    %colupper = red!75!blue,%
    listing only
}

\newtcbinputlisting{\inputlatexexalone}[2][]{%
    listing file={#2},%
    breakable,
    sharp corners,%
    left   = 1mm, right = 1mm,%
    bottom = 1mm, top   = 1mm,%
    %colupper = red!75!blue,%
    listing only
}


\newcommand\inputlatexexcodeafter[1]{%
    \begin{center}
        \input{#1}
    \end{center}

    \vspace{-.5em}
    
    Le rendu précédent a été obtenu via le code suivant.
    
    \inputlatexexalone{#1}
}


\newcommand\inputlatexexcodebefore[1]{%
    \inputlatexexalone{#1}
    \vspace{-.75em}
    \begin{center}
        \textit{\footnotesize Rendu du code précédent}
        
        \medskip
        
        \input{#1}
    \end{center}
}


% -- REMARK -- %

\theoremstyle{definition}
\newtheorem*{remark}{Remarque}


% -- EXAMPLE -- %

\newcounter{paraexample}[subsubsection]

\newcommand\@newexample@abstract[2]{%
    \paragraph{%
        #1%
        \if\relax\detokenize{#2}\relax\else {} -- #2\fi%
    }%
}

\newcommand\newparaexample{\@ifstar{\@newparaexample@star}{\@newparaexample@no@star}}

\newcommand\@newparaexample@no@star[1]{%
    \refstepcounter{paraexample}%
    \@newexample@abstract{Exemple \theparaexample}{#1}%
}

\newcommand\@newparaexample@star[1]{%
    \@newexample@abstract{Exemple}{#1}%
}


% -- CHANGE LOG -- %

\newcommand\topic{\@ifstar{\@topic@star}{\@topic@no@star}}

\newcommand\@topic@no@star[1]{%
    \textbf{\textsc{#1}.}%
}

\newcommand\@topic@star[1]{%
    \textbf{\textsc{#1} :}%
}


% -- ABOUT MACROS & Co. -- %

\newcommand\env[1]{\texttt{#1}}
\newcommand\macro[1]{\env{\textbackslash{}#1}}

\newcommand\separation{
    \medskip
    \hfill\rule{0.5\textwidth}{0.75pt}\hfill
    \medskip
}


\newcommand\extraspace{
    \vspace{0.25em}
}


\newcommand\whyprefix[2]{%
    \textbf{\prefix{#1}}-#2%
}

\newcommand\mwhyprefix[2]{%
    \texttt{#1 = #1-#2}%
}

\newcommand\prefix[1]{%
    \texttt{#1}%
}


\newcommand\inenglish{\@ifstar{\@inenglish@star}{\@inenglish@no@star}}

\newcommand\@inenglish@star[1]{%
    \emph{\og #1 \fg}%
}

\newcommand\@inenglish@no@star[1]{%
    \@inenglish@star{#1} en anglais%
}


\newcommand\ascii{\texttt{ASCII}}

\makeatother % Technical doc - END


\usepackage{tnsproba}


\begin{document}

\renewcommand\labelitemi{\raisebox{0.125em}{\tiny\textbullet}}
\renewcommand{\labelitemii}{---}

\title{  %
	Le package \texttt{tnsproba}:\\%
	parler des probabilités facilement\\%
	{\footnotesize Code source disponible sur \url{https://github.com/typensee-latex/tnsproba.git}.}\\%
{\footnotesize Version \texttt{0.11.0-beta} développée et testée sur \macosxname{}.}%
}
\author{Christophe BAL}
\date{2020-09-23}

\maketitle


\vspace{2em}

\hrule

\tableofcontents

\vspace{1.5em}

\hrule

\newpage

\section{Introduction}

Le package \verb+tnsproba+ propose des macros utiles quand l'on parle de probabilités. La saisie se veut sémantique et simple.


% tnscom used - START
\section{Beta-dépendance}

\verb#tnscom# qui est disponible sur \url{https://github.com/typensee-latex/tnscom.git} est un package utilisé en coulisse.
% tnscom used - END
% List of packages - START
\section{Packages utilisés}

La roue ayant déjà été inventée, le package \verb#tnsproba# utilise les packages suivants sans aucun scrupule.

\begin{multicols}{4}
    \begin{itemize}
        \item \verb#forest#
        \item \verb#nicematrix#
        \item \verb#simplekv#
        \item \verb#tcolorbox#
        \item \verb#xstring#
    \end{itemize}
\end{multicols}
% List of packages - END
\section{Ensembles probabilistes}

Le package \verb+tnssets+ propose la macro \macro{setproba} pour indiquer des ensembles de type probabiliste.
Se rendre sur \url{https://github.com/typensee-latex/tnssets.git} si cela vous intéresse.
\section{Juste pour rédiger}

\subsection{Probabilité \og simple \fg}

\newparaexample{}

\begin{latexex}
$\proba{A}$
\end{latexex}


% ---------------------- %


\newparaexample{Choisir le nom de la probabilité}

\begin{latexex}
$\proba[p]{A}$
\end{latexex}


% ---------------------- %


\subsection{Probabilité conditionnelle}

\newparaexample{Les deux écritures classiques}

La 1\iere{} notation, qui est devenue standard, permet de comprendre l'ordre des arguments.
\begin{latexex}
 $\probacond {B}{A}
= \probacond*{B}{A}$
\end{latexex}


% ---------------------- %


\newparaexample{Obtenir la formule de définition}

Le préfixe \prefix{e} est pour \whyprefix{e}{xpand} soit \inenglish{développer}
\footnote{
	Pour ne pas alourdir l'utilisation de \macro{probacond}, il a été choisi d'utiliser un préfixe au lieu d'un système de multi-options.
}.

\begin{latexex}
 $\eprobacond {B}{A}
= \eprobacond*{B}{A}$
\end{latexex}


% ---------------------- %


\newparaexample{Choisir le nom de la probabilité}

\begin{latexex}
 $\probacond  [p]{B}{A}
= \probacond* [p]{B}{A}
= \eprobacond*[p]{B}{A}
= \eprobacond [p]{B}{A}$
\end{latexex}


% ---------------------- %
%\section{Généralités}

\subsection{Évènement contraire}

\macro{nevent} vient de \whyprefix{n}{ot} \prefix{event} qui est une pseudo-traduction de \inenglish{évènement contraire}.
\begin{latexex}
$\nevent{A}$
\end{latexex}


% ---------------------- %
%\section{Généralités}

\subsection{Espérance, variance et écart-type}

\newparaexample{Espérance}

\macro{expval} vient de \whyprefix{exp}{ected} \whyprefix{val}{ue} soit \inenglish{espérance}.
\begin{latexex}
$\expval{X}$
\end{latexex}


% ---------------------- %


\newparaexample{Choisir le nom de l'espérance}

\begin{latexex}
$\expval[E_1]{X}$
\end{latexex}


% ---------------------- %


\newparaexample{Variance}

Notez la possibilité d'utiliser \macro{mathit} pour obtenir des lettres en italique.

\begin{latexex}
$\var   {X}$ ou
$\var[v]{X}$ ou
$\var[\mathit{v}]{X}$
\end{latexex}


% ---------------------- %


\newparaexample{Écart-type}

\macro{stddev} vient de \whyprefix{st}{andar-}\prefix{d} \whyprefix{dev}{iation} soit \inenglish{écart-type}.

\begin{latexex}
$\stddev   {X}$ ou
$\stddev[s]{X}$ ou
$\stddev[\mathit{s}]{X}$
\end{latexex}


% ---------------------- %
\section{Calculer l'espérance -- Cas fini}

Il est possible de définir facilement les valeurs d'une variable aléatoire finie (v.a.f.) et d'obtenir si souhaiter le calcul détaillé de son espérance
\footnote{
    Pour l'affichage une limitation importante est que le tableau et les calculs doivent tenir sur la largeur de la ligne.
    Concrètement pour un usage pédagogique cette limitation ne devrait jamais poser de problème.
}.


% ---------------------- %


\subsection{Pour un usage direct -- Notations par défaut}

Dans la section \ref{tnsproba-calclexpval-name-n-reuse} page \pageref{tnsproba-calclexpval-name-n-reuse} nous verrons qu'il est possible de définir une loi à un endroit puis de la réutiliser à d'autres
\footnote{
    La réutilisation se fera avec un argument vide de \macro{calcexpval}. C'est pour cela qu'une macro est proposée et non un environnement.
}.
Nous verrons aussi dans la section \ref{tnsproba-calclexpval-notations} page \pageref{tnsproba-calclexpval-notations} que certaines notations sont modifiables.

\medskip

Dans la présente section nous reproduirons à chaque fois les paramètres de la v.a.f. même si ceci produit des exemples un peu lourds à lire.


% ---------------------- %


\newparaexample{Loi d'une v.a.f.}

La définition de la loi d'une v.a.f. avec la macro \macro{calcexpval} se fait avec une syntaxe semblable à celle d'un tableau.
Notez dans l'exemple suivant que par défaut un tableau centré est affiché ce qui correspond à l'option par  défaut \verb#disp = table#.
Ce n'est pas le seul comportement possible comme vont le montrer les autres exemples à venir.

\inputlatexexflat{examples/expval-basic-default.extra.tex}


\begin{remark}
    Il est possible de ne rien afficher comme ci-dessous où \prefix{disp} est pour \whyprefix{disp}{lay} soit \inenglish{afficher}.
    Cette option sera utile pour définir une loi à un endroit et l'utiliser à d'autres.

	\inputlatexexflat{examples/expval-basic-disp-none.extra.tex}
\end{remark}


% ---------------------- %


\newparaexample{Calculs expliqués et décorés de l'espérance d'une v.a.f.}

La macro \macro{calcexpval} propose un système de clé valeur pour des réglages personnalisé. L'exemple ci-dessous montre comment obtenir un calcul détaillé et décoré de l'espérance.

\inputlatexexflat{examples/expval-basic-disp-all.extra.tex}


L'exemple suivant montre qu'il est facile de changer le couleurs qui sont utilisées de façon cyclique \emph{(on peut indiquer une seule couleur)}.

\inputlatexexflat{examples/expval-basic-disp-all-colors.extra.tex}


% ---------------------- %


\newparaexample{Juste détailler les calculs de l'espérance d'une v.a.f.}

Ci-dessous \prefix{exp} est pour \whyprefix{exp}{and} soit \inenglish{développer}. Cette option sera très utile lors de la réutilisation d'une loi définie précédemment.

\inputlatexexflat{examples/expval-basic-disp-exp.extra.tex}


% ---------------------- %


\newparaexample{Des bouts du calcul}

Lors de la réutilisation d'une loi définie précédemment les deux options \prefix{formal} et \prefix{eval} peuvent rendre service.

\inputlatexexflat{examples/expval-basic-disp-pieces.extra.tex}


% ---------------------- %


\newparaexample{Calculs expliqués sans $\Sigma$}

L'option \verb#nosigma# permet de ne pas afficher le symbole $\Sigma$ pour des raisons pédagogiques ou d'efficacité.

\inputlatexexflat{examples/expval-basic-disp-no-sigma.extra.tex}
%\section{Calculer l'espérance -- Cas fini}

\subsection{Pour un usage différé -- Notations par défaut} \label{tnsproba-calclexpval-name-n-reuse}

Rien de bien compliqué à utiliser comme le montre l'exemple suivant. Notez bien qu'il faut indiquer un argument vide à la macro \macro{calcexpval} lors de la réutilisation.

\inputlatexexflat{examples/expval-use-later-case-1.extra.tex}


\begin{remark}
	Si cela vous convient, il est possible d'utiliser des noms de type \og chemin de fichiers \fg{} comme ci-après
	\footnote{
		Ceci permet d'utiliser des espaces de noms très pratiques à l'usage.
	}.
	
	\inputlatexexflat{examples/expval-use-later-case-2.extra.tex}
\end{remark}
%\section{Calculer l'espérance -- Cas fini}

\subsection{Notations personnalisées} \label{tnsproba-calclexpval-notations}

\newparaexample{Toutes les options}

L'exemple ci-après utilise toutes les options liées à l'affichage textuel.
Il faut noter que la clé \verb#com# sert juste à ajouter un court texte sur une seule ligne
\footnote{
	Si besoin utiliser séparément l'affichage par défaut avec \texttt{name = maloi} suivi d'un long texte puis enfin employer \texttt{disp = exp, reuse = maloi}.
}.

\inputlatexexflat{examples/expval-use-notation-basic.extra.tex}


% ---------------------- %


\newparaexample{En réutilisant une loi définie précédemment}

Lors de la création d'une loi nommée via la clé \verb#name# les options textuelles, autre que le commentaire court, sont mémorisées.
Ceci est très utile comme le montre le 1\ier{} affichage de l'exemple suivant tout en étant modifiable à tout moment comme dans le dernier affichage ci-après.

\inputlatexexflat{examples/expval-use-notation-reuse.extra.tex}
%\section{Arbres pondérés}
\section{Arbres pondérés}

\subsection{Au commencement était la forêt...}

Le gros du travail est fait par le package \verb+forest+ qui s'appuie \verb+TikZ+ dont on peut utiliser toute la machinerie afin d'obtenir des choses sympathiques comme ci-dessous et ceci à moindre coût neuronal comme vont le montrer les explications données dans les sections suivantes.

\inputlatexexcodeafter{TikZ/probatree-showcase.tkz}


\begin{remark}
	Jusqu'à la section \ref{tnsproba-autonum-forest} page \pageref{tnsproba-autonum-forest}, nous nommerons à la main les noeuds des arbres via \verb#name = ...# lorsque cela sera nécessaire.
	Dans la section indiquée nous verrons comment utiliser les noms automatiques donnés par le package \verb#forest#.
\end{remark}
%\section{Arbres pondérés}

\subsection{Les bases}

\newparaexample{Le cas type}

Commençons par un arbre nu pour voir comment utiliser l'environnement \verb+probatree+ qui s'appuie en coulisse sur celui nommé \verb+forest+ du package éponyme.
L'exemple qui suit utilise juste les réglages spécifiques de mise en forme de l'arbre qui sont propres à \verb+probatree+.

\inputlatexex{tikz/probatree-undecorated.tkz}


% ---------------------- %


\newparaexample{Ajouter des pondérations}

Dans le code suivant, ce sont les clés
\footnote{
	En fait du point de vue de TikZ, ce sont des styles.
}
\verb+pweight+, \verb+apweight+ et \verb+bpweight+ qui facilitent l'écriture des pondérations sur les branches.
Indiquons que \prefix{pweight} vient de \whyprefix{p}{robability} et \prefix{weight} soit \inenglish*{probabilité} et \inenglish{poids}.
Quant au \prefix{a} et au \prefix{b} au début de \prefix{apweight} et \prefix{bpweight} respectivement, ils viennent de \whyprefix{a}{bove} et \whyprefix{b}{elow} soit \inenglish*{dessus} et \inenglish{dessous}.

\inputlatexex{tikz/probatree-weight-placement.tkz}


\begin{remark}
	Notez que le mode mathématique est activé par défaut pour les noms des noeuds et les poids comme le montre l'exemple improbable
	\footnote{
		Quoique...
	}
	ci-dessous.

	\inputlatexex{tikz/probatree-math-mode.tkz}
\end{remark}


% ---------------------- %


\newparaexample{Des poids cachés partout}

On peut cacher tous les poids sans avoir à les effacer partout dans le code \LaTeX{} \emph{(ceci peut être utile lors de la rédaction d'exercices)}.
Il suffit pour cela d'utiliser une option \verb#hideall# de l'environnement \verb+probatree+. Comme les codes des arbres utilisent des crochets, l'option s'indique via \verb#<hideall># et non le traditionnel \verb#[hideall]#
\footnote{
	Ceci a été rendu possible grâce à un code proposé dans l'excellent livre \emph{\og Apprendre à programmer en \TeX \fg} de Christian Tellechea.
}.
L'option utilisée par défaut est \verb#asit# qui demande de respecter les indications données pour les poids dans le code de l'arbre.

\inputlatexex{tikz/probatree-weight-hide-all.tkz}


% ---------------------- %


\newparaexample{Des poids cachés localement}

Pour ne cacher que certains poids afin de produire par exemple un arbre à compléter, il faudra utiliser localement le style \verb+pweight*+ comme dans l'exemple ci-dessous.

\inputlatexex{tikz/probatree-weight-hide-locally.tkz}


% ---------------------- %


\newparaexample{Forcer l'affichage des poids cachés localement}

Imaginons que nous voulions donner l'arbre précédent avec tous ses poids visibles pour une correction par exemple.
Il suffit dans ce cas de passer via l'option \verb#showall# de l'environnement \verb+probatree+ qui affichera absolument tous les poids \emph{(on tape une fois et on réutilise le même code dans deux contextes différents)}.

\inputlatexex{tikz/probatree-weight-show-all.tkz}


% ---------------------- %


\newparaexample{Un signe $=$ et/ou une virgule dans les étiquettes}

Vous ne pouvez pas utiliser directement un signe $=$ ou une virgule dans les étiquettes des branches
\footnote{
	Ces deux symboles font partie de la syntaxe TikZ.
}.
Pour contourner cette limitation, il suffit de mettre le contenu de l'étiquette entre des accolades.

\inputlatexex{tikz/probatree-weight-coma-equal.tkz}
%\section{Arbres pondérés}

\subsection{Commenter les feuilles}

\newparaexample{Tout aligner}

Que ce soit pour expliquer un arbre de probabilité, ou bien pour raisonner sur ce dernier, l'effet suivant est très utile
\footnote{
	Le package \texttt{forest} permet d'indiquer directement des mises en forme dans le code de l'arbre.
	L'auteur du présent package trouve bien plus efficace à l'usage de ne pas toucher au code minimal d'un arbre.
	Ceci explique donc le choix retenu de donner les décorations supplémentaires après le code de l'arbre.
}.
Noter l'utilisation possible de la clé \verb#tcol# pour \whyprefix{t}{ext} et \whyprefix{col}{or} afin d'indiquer la couleur du texte au format TikZ.
La couleur par défaut est le noir. 


\inputlatexexflat{tikz/probatree-comment.tkz}


\begin{remark}
	Commenter un noeud interne ne provoquera pas d'erreur même si \macro{ptreeComment} n'a pas été conçu pour ceci.
	Ceci a été utilisé dans l'exemple d'introduction mais ça reste un petit hack.
\end{remark}


% ---------------------- %


\newparaexample{Coller au plus près}

En utilisant \macro{ptreeComment*} au lieu de \macro{ptreeComment}, les commentaires seront proches des noeuds et donc non alignés verticalement. 
Avec l'exemple précédent on obtient la mise en forme qui suit.

\medskip

\input{tikz/probatree-comment-leftmost.tkz}


% ---------------------- %


\newparaexample{Décalages horizontal et vertical -- Avec des variables aléatoires}

Grâce aux clés \verb#dx# et \verb#dy# il est possible d'ajouter des décalages horizontal et vertical. Ceci permet d'obtenir ce qui suit sans trop se fatiguer les méninges.

\input{tikz/probatree-comment-dx-dy.tkz}


Le code utilisé est le suivant.
Notez qu'ici il y a des réglages à faire au doigt mouillé.
Dans l'exemple suivant nous allons voir comment se passer des horribles copier-coller.

\inputlatexexalone{tikz/probatree-comment-dx-dy-short.tkz}


% ---------------------- %


\newparaexample{Commenter via une boucle -- Avec des variables aléatoires}

Dans le code précédent nous avons dû faire des copier-coller. La macro \macro{foreach} de TikZ permet d'éviter cela afin d'obtenir un code très facile à maintenir et à comprendre comme celui ci-après. Ceci étant indiqué, il y a des pièges à éviter comme nous l'expliquons juste après.

% -- DEBUG - TO KEEP ! - START -- %
%\input{tikz/probatree-comment-foreach.tkz}
% -- DEBUG - TO KEEP ! - END -- %

\inputlatexexalone{tikz/probatree-comment-foreach-short.tkz}

Voici les pièges à éviter.

\begin{enumerate}
	\item \macro{foreach} ignore les espace initiaux mais pas les finaux. Si vous utilisez \verb#nB /$1$# au lieu de  \verb#nB/$1$# alors la macro croira que le nom se finit par un espace et \verb#forest# ne pourra rien faire. 

	\item Comme les noms \macro{color}, \macro{tcol}, \macro{dx} et \macro{dy} sont utilisés en coulisse, il n'est pas possible de les utiliser dans les boucles.
\end{enumerate}
%\section{Arbres pondérés}

\subsection{Expliquer les niveaux}

Les clés étant similaires à celles vues pour les commentaires, les exemples devraient donc se suffire à eux-mêmes.


\newparaexample{Expliquer au-dessus}

\inputlatexexflat{tikz/probatree-tag-up.tkz}


% ---------------------- %


\newparaexample{Expliquer en dessous}

\inputlatexexflat{tikz/probatree-tag-down.tkz}


% ---------------------- %


\newparaexample{Décalages horizontal et vertical}

\inputlatexexflat{tikz/probatree-tag-dx-dy.tkz}
%\section{Arbres pondérés}

\subsection{Textes des noeuds}

\newparaexample{Changer les couleurs}

On peut a posteriori changer les couleurs du texte et du fond d'un noeud via \macro{ptreeNodeColor} présentée ci-dessous.

\inputlatexexflat{tikz/probatree-txtnode-color.tkz}


Voici ce qu'il faut retenir du code précédent.

\begin{enumerate}
	\item Par défaut le blanc sert de couleur de fond. Ceci se voit dans la mise en forme du noeud $A$ pour lequel \verb#tcol# change juste la couleur du texte qui par défaut sera le noir.
	
	\item Pour changer la couleur de fond, on passe via \verb#bcol#. Ceci permet d'avoir le rendu souhaité pour la mise en forme du noeud $B$
	      \footnote{
	      	Ainsi le fond du noeud et celui du cadre ont la même couleur.
		   }.
	
	\item Les préfixes \prefix{t} et \prefix{b} de \verb#bcol# et \verb#tcol# sont pour \whyprefix{t}{exte} et \whyprefix{b}{ackground}, ce dernier mot signifiant \inenglish{fond}.
	      Quant à \verb#col# c'est pour \whyprefix{col}{or} soit \inenglish{couleur}.
\end{enumerate}



\begin{remark}
	Techniquement toutes les macros présentées dans cette section cachent l'ancien texte d'un noeud par superposition de ce texte en utilisant une couleur identique pour le texte et le fond.  
\end{remark}


% ---------------------- %


\newparaexample{Changer le texte}

On peut a posteriori changer le texte d'un noeud, avec un choix des couleurs, via \macro{ptreeNodeNewText} présentée ci-après.
Noter que les couleurs par défaut du texte et du fond restent le noir et le blanc respectivement.

\inputlatexexflat{tikz/probatree-txtnode-changetxt.tkz}



% ---------------------- %


\newparaexample{Récupérer le texte d'un noeud}

Considérons l'arbre un peu plat suivant.

\inputlatexexflat{tikz/probatree-txtnode-txtafter.tkz}

Une fois ce code inséré il est possible de récupérer \ptreeTextOf{nA} juste en tapant \verb#\ptreeTextOf{nA}#. Voici un exemple concret
\footnote{
	Mais pas forcément pertinent... L'exemple peut être intéressant dans le cadre de contenus produits de façon automatisée.
}
d'utilisation.

\inputlatexexflat{tikz/probatree-txtnode-txtafter-comment.tkz}


\begin{remark}
	Comme la macro \macro{ptreeNodeNewText} utilise le dernier noeud rencontré, il faudra veiller à ne pas vouloir utiliser les textes de noeuds présents dans deux arbres différents et qui ont en même temps le même nom. 
\end{remark}
%\section{Arbres pondérés}

\subsection{Avec des cadres}

\newparaexample{Des cadres finaux}

Via la clé \verb#pframe# il est très aisé d'encadrer un sous-arbre final
\footnote{ 
	Un sous-arbre sera dit final si toutes ses feuilles correspondent à des feuilles de l'arbre initial. 
}
comme le montre l'exemple suivant
\footnote{ 
	Ce type de cadre est très utile d'un point de vue pédagogique. 
}.
Dans l'exemple ci-après nous utilisons la bidouille \verb+{},s sep = 1.3cm+ qui évite que les cadres se superposent.

\inputlatexex{tikz/probatree-frame-final.tkz}


\begin{remark}
	La clé \verb#pframe# est un cas particulier de décoration car les autres décorations se font en dehors de la définition de l'arbre
\end{remark}
%\begin{remark}
%	La clé \verb#pframe# est l'un des deux cas particuliers de décoration car la majorité des décorations se font en dehors de la définition de l'arbre
%\end{remark}


% ---------------------- %


\newparaexample{Des cadres non finaux}

La macro \macro{ptreeFrame} permet facilement d'encadrer un sous-arbre non final.
Ceci nécessite d'utiliser des noms de noeuds.
Voici un exemple où la macro \macro{ptreeFrame} attend les noms de la racine et des deux noeuds finaux le plus haut et le plus bas.

\inputlatexex{tikz/probatree-frame-not-final.tkz}
%\section{Arbres pondérés}

\subsection{Mettre en valeur des chemins}

\newparaexample{Avec deux noeuds -- Choix des couleurs}

La macro \macro{ptreeFocus} rend facile la mise en valeur d'un chemin particulier comme le montre l'exemple ci-après qui est une simple démo.
Notez que les noms des noeuds sont séparés par des barres verticales \verb#|# et  qu'il est possible d'utiliser des espaces pour améliorer la lisibilité du code. 

\inputlatexex{tikz/probatree-focus-edge-color.tkz}


Voici ce qu'il faut retenir pour les couleurs qui doivent être du type TikZ.

\begin{enumerate}
	\item \verb#lcol# sert à indiquer la couleur des arêtes et des cadres éventuels.
	      Par défaut \verb#lcol = blue#.
	      Indiquons que le préfixe \prefix{l} est pour \whyprefix{l}{igne}.

	\item \verb#tcol# sert à indiquer la couleur du texte.
	      Par défaut \verb#lcol = black#.
	      Indiquons que le préfixe \prefix{t} est pour \whyprefix{t}{exte}.

	\item \verb#bcol# sert à indiquer la couleur du fond.
	      Par défaut \verb#lcol = white#.
	      Indiquons que le préfixe \prefix{b} est pour \whyprefix{b}{ackground} soit \inenglish{fond}. 
\end{enumerate}


% ---------------------- %


\newparaexample{Avec deux noeuds -- Choix des cadres}

Par défaut le 1\ier{} noeud n'est pas encadré car il est courant de vouloir indiquer un noeud partant de la racine qui traditionnellement ne contient aucun texte.
Il est possible d'obtenir deux autres mises en forme comme ci-après.

\inputlatexex{tikz/probatree-focus-edge-frame.tkz}

Voici ce qu'il faut retenir à propos des encadrements.

\begin{enumerate}
	\item \verb#frame = nostart#, le réglage par défaut, demande d'encadrer tous les noeuds sauf le 1\ier{}.
	
	\item \verb#frame = start# demande d'encadrer tous les noeuds.

	\item \verb#frame = none# demande de n'encadrer aucun noeud.
\end{enumerate}



% ---------------------- %


\newparaexample{Plusieurs noeuds d'un coup}

Rien de bien compliqué à condition de bien respecter l'ordre de saisie des noeuds.

\inputlatexexflat{tikz/probatree-focus-edge-long-nostart.tkz}


Avec \verb#frame = start# on obtient l'arbre suivant où le mini disque initial
\footnote{
	Ce disque est en fait un carré aux coins arrondis autour d'un texte vide.
}
n'est pas forcément souhaité.

\input{tikz/probatree-focus-edge-long-start.tkz}


Avec \verb#frame = none# on obtient l'arbre ci-dessous.

\input{tikz/probatree-focus-edge-long-none.tkz}


% ---------------------- %


%\newparaexample{De la racine à un noeud}

%Comme il est très courant de vouloir indiquer un chemin de la racine à une feuille, cette fonctionnalité est proposée par le package via les macros \macro{aptreeFocusAll},  \macro{aptreeFocusAll*} et \macro{aptreeFocusAll**} qui prennent comme unique argument obligatoire le noeud final du chemin
%\footnote{
%	Rien n'interdit de prendre un noeud interne au lieu d'u racine même si cela ne semble pas très utile a priori.
%}
%indiqué via le nom automatique fourni par \verb#forest#.
%On peut alors utiliser le code suivant très rapide à taper : voir la section \ref{tnsproba-autonum-forest} page \pageref{tnsproba-autonum-forest} où est expliqué d'où vient le nom \verb#!xxxxx# utilisé ci-après.
%

%\inputlatexexflat{tikz/probatree-focus-edge-all.tkz}
%\splitit{1312}


%\begin{remark}
%	La clé \verb#pfocus# est le 2\iem{} cas particulier de décoration avec \verb#pframe# car les autres décorations se font en dehors de la définition de l'arbre.
%\end{remark}
%\section{Arbres pondérés}

\subsection{Utiliser les noms automatiques donnés par \texttt{forest}} \label{tnsproba-autonum-forest}

Voyons comment obtenir le résultat suivant en indiquant tous les noeuds via les noms automatiques fabriqués par \verb@forest@.
%\footnote{
%	Le même rendu peut se taper bien plus efficacement via la macro à un argument \macro{ptreeFocusAll*} comme cela est expliqué dans la section précédente.
%}.

\inputlatexexcodeafter{tikz/probatree-autonum-default.tkz}

% -- DEBUG - TO KEEP ! - START -- %
%\input{tikz/probatree-autonum-start.tkz}
%
%\input{tikz/probatree-autonum-none.tkz}
% -- DEBUG - TO KEEP ! - END -- %



Voici comment s'y prendre.

\begin{enumerate}
	\item On utilise \macro{aptreeFocus} au lieu de \macro{ptreeFocus} où le préfixe \prefix{a} est pour \whyprefix{a}{uto}.

		  \medskip
		  
		  {\itshape
		  		\textbf{ATTENTION !}
		  		Il n'est pas possible de modifier les couleurs du texte et du fond des noeuds car \macro{aptreeTextOf}, \macro{aptreeNodeColor} et \macro{aptreeNodeNewText} n'ont pas pu être implémentées.
		  		Par contre les macros \macro{aptreeComment} et \macro{aptreeFrame} existent sans limitation.
		  }

		  \medskip

	\item Chaque nom automatique
	      \footnote{
	      		Ce sont en fait des noms relativement à la racine de l'arbre.
	      }
	      fabriqué par \verb#forest# commence par \texttt{!} . Ce caractère spécial n'est pas à indiquer car il sera ajouté automatiquement en coulisse.

	
	\item La racine est nommée \texttt{!} par \verb#forest# d'où le \verb#|# seul au début de l'argument de \macro{aptreeFocus*} ci-dessus afin d'indiquer un texte vide comme tout premier noeud.

	
	\item Pour voir ce qu'il faut faire pour un noeud autre que la racine, considérons par exemple \texttt{1321}. On indique en fait le chemin à suivre après la racine pour arriver au noeud voulu.
	\begin{itemize}
		\medskip
		
		\item Aller d'abord au
		      \kern.25em\fbox{1}\kern.4ex\ier{}
		      \kern.15em
		      noeud du niveau 1 qui ici est $A$.

		\item Aller ensuite au
		      \kern.55em\fbox{3}\kern.4ex\ieme{}
		      \kern.4em
		      noeud du niveau 2 qui ici est $D$.

		\item Aller après au
		      \kern1.35em\fbox{2}\kern.4ex\ieme{}
		      \kern.4em
		      noeud du niveau 3 qui ici est $F$.
		
		\item Aller enfin au
		      \kern1.55em\fbox{1}\kern.4ex\ier{}
		      \kern.15em
		      noeud du niveau 4 qui ici est $G$.
		      
		\medskip
		
		\item On obtient finalement notre noeud nommé \fbox{\texttt{1321}}.
	\end{itemize}
\end{enumerate}


\begin{remark}
	Dans la mesure du possible, utiliser les noms automatiques facilite la maintenance des arbres sur le long terme.
	Si on reprend le tout premier exemple d'arbre décoré, il est bien plus simple de faire comme suit car on ne touche pas à la structure minimale du code de l'arbre.
	On a même utilisé \macro{ptreeFrame} au lieu de la clé \verb#pframe# dans l'arbre.

	\inputlatexexflat{tikz/probatree-showcase-autonum.tkz}
\end{remark}
%\section{Arbres pondérés}
\newpage

\section{Historique}

Nous ne donnons ici qu'un très bref historique récent
\footnote{
	On ne va pas au-delà de un an depuis la dernière version.
}
de \verb+tnsproba+ à destination de l'utilisateur principalement.
Tous les changements sont disponibles uniquement en anglais dans le dossier \verb+change-log+ : voir le code source de \verb+tnsproba+ sur \verb+github+.

\begin{description}
% Changes shown - START

    \medskip
    \item[2020-09-23] Nouvelle version mineure \verb+0.11.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic*{Arbre de probabilités}
        	  ajout de \macro{ptreeTag}, \macro{ptreeTag*}, \macro{aptreeTag} et \macro{aptreeTag*} pour décrire individuellement les niveaux de l'arbre.
    \end{itemize}
    
    
    \separation

% ------------------------ %

    \medskip
    \item[2020-09-03] Nouvelle version mineure \verb+0.10.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic{Généralités}
    
        \begin{itemize}[itemsep=.5em]
            \item $\mathrm{P}$ est le nom par défaut d'une probabilité.
    
    		\item Les noms des probabilités, des espérances, des variances et des écarts-types utilisent tous une police droite via \macro{mathrm} en coulisse.
        \end{itemize}
    
    
    % ---------------------- %
    
    
        \item \topic{Espérance d'une variable aléatoire finie}
    
        \begin{itemize}[itemsep=.5em]
            \item \macro{expval} est utilisée en coulisse pour rédiger les espérances dans les détails des calculs.
            
    		\item L'ordre des produits dans le calcul numérique est le même que celui dans la somme formelle.
        \end{itemize}
    \end{itemize}
    
    
    \separation
    

% ------------------------ %

    \medskip
    \item[2020-09-02] Nouvelle version mineure \verb+0.9.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic*{Calculs de l'espérance dans le cas fini}
        	  \macro{calcexpval} rend facile la définition d'une variable aléatoire finie avec la possibilité de détailler le calcul de son espérance.
    
    
    % ---------------------- %
    
    
        \item \topic*{Arbre de probabilités}
        	  pas mal de changements dans l'API et quelques nouveautés.
    
        \begin{itemize}[itemsep=.5em]
            \item \verb#\begin{probatree}<hideall># \verb#...# \verb#\end{probatree}#  remplace l'usage de l'environnement \env{probatree*}.
    
    
            \item \verb#\begin{probatree}<showall># \verb#...# \verb#\end{probatree}# remplace l'usage de l'environnement \env{probatree**}.
    
    
            \item De nouvelles macros permettent d'agir sur le texte des noeuds.
    
            \begin{enumerate}
            	\item \macro{ptreeTextOf} renvoie le texte d'un noeud.
    
            	\item \macro{ptreeNodeColor} change les couleurs du texte et/ou du fond d'un noeud.
    
            	\item \macro{ptreeNodeNewText} change le texte en plus éventuellement  les couleurs du texte et/ou du fond d'un noeud.
            \end{enumerate}
    
    
            \item \macro{ptreeFocus} a évolué
                  \footnote{
                  		Malheureusement ces changements n'ont pas pu être faits pour \macro{aptreeFocus} principalement car l'équivalent automatique de \macro{ptreeTextOf} n'a pu être implémenté.
    			  }.
    
            \begin{enumerate}
            	\item \macro{ptreeFocus[frame = start]} remplace l'ancien \macro{ptreeFocus}.
    
            	\item \macro{ptreeFocus[frame = none]} remplace \macro{ptreeFocus**} qui n'existe plus.
    
            	\item \macro{ptreeFocus[frame = nostart]} est utilisé par défaut et remplace \macro{ptreeFocus*} qui n'existe plus. On obtient dans ce cas une mise en valeur encadrant tous les noeuds sauf le tout 1\ier{}.
    
            	\item Les clés optionnelles \verb#lcol#, \verb#tcol# et \verb#bcol# permettent de choisir la couleur des arrêtes et des cadres, celle du texte et enfin celle du fond.
            \end{enumerate}
    
    
            \item \verb#tcol# remplace l'ancien \verb#col# de \macro{ptreeComment} et \macro{aptreeComment}.
    
    		\item \verb#lcol# remplace l'ancien \verb#col# de \macro{ptreeFrame}, \macro{aptreeFrame} et \macro{aptreeFocus}.
    
    
    
        \end{itemize}
    \end{itemize}
    
    
    \separation

% ------------------------ %

    \medskip
    \item[2020-08-10] Nouvelle version mineure \verb+0.8.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic*{Arbre de probabilités}
              le mode mathématique est activé par défaut pour les noms des noeuds et les poids \emph{(plus besoin de taper plein de \texttt{\$})}.
    \end{itemize}
    
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-08-09] Nouvelle version mineure \verb+0.7.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic{Arbre de probabilités}
        \begin{itemize}[itemsep=.5em]
            \item Utilisation obligatoire de \verb#col=...# pour indiquer une couleur à toutes les macros de décoration.
            
            \item Les macros \macro{ptreeComment}, \macro{ptreeComment*}, 
                  \macro{aptreeComment} et \macro{aptreeComment*}
                  ont deux clés \verb#dx# et \verb#dy# pour indiquer un décalage relatif.
            
            \item Ajout de l'environnement \env{probatree**} qui force l'affichage de tous les poids !
        \end{itemize}
    \end{itemize}
    
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-08-08] Nouvelle version mineure \verb+0.6.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic{Arbre de probabilités}
        \begin{itemize}[itemsep=.5em]
            \item \macro{aptreeFocus}, \macro{aptreeFocus*} et \macro{aptreeFocus**} permettent d'utiliser le système de nommage automatique des noeuds proposé par \verb#forest#.
            
            \item Il en va de même pour \macro{aptreeComment} et \macro{aptreeFrame}.
        \end{itemize}
    \end{itemize}
    
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-08-05] Nouvelle version mineure \verb+0.5.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic{Arbre de probabilités}
        \begin{itemize}[itemsep=.5em]
            \item \macro{ptreeFocus}, \macro{ptreeFocus*} et \macro{ptreeFocus**} fonctionnent avec un multi-argument pour pourvoir indiquer un chemin sur plusieurs noeuds.
            
            \item Suppression de la clé \macro{pcomment}.
            
            \item Ajout des macros \macro{ptreeComment} et \macro{ptreeComment*} qui simplifient la saisie.
        \end{itemize}
    \end{itemize}
    
    \separation

% ------------------------ %

    \medskip
    \item[2020-07-31] Nouvelle version mineure \verb+0.4.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic*{Arbre}
        	  possibilité de mettre en valeur un chemin via \macro{ptreeFocus},  \macro{ptreeFocus*} ou \macro{ptreeFocus**}.
    \end{itemize}
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-07-25] Nouvelle version mineure \verb+0.3.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic{Arbre}
        \begin{itemize}[itemsep=.5em]
            \item Ajout du style \prefix{pcomment} pour placer du texte à la droite d'une feuille.
    
            \item Le style \prefix{frame} a été renommé \prefix{pframe}.
        \end{itemize}
    \end{itemize}
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-07-23] Nouvelle version mineure \verb+0.2.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic*{Arbre}
              ajout de la macro \macro{ptreeFrame} pour tracer facilement des sous cadres non \og finaux \fg.
    \end{itemize}
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-07-22] Nouvelle version mineure \verb+0.1.0-beta+.
    
    \begin{itemize}[itemsep=.5em]
        \item \topic*{Probabilité conditionnelle}
              \macro{probacondexp} renommée en  \macro{eprobacond}.
    
        \item \topic*{Évènement contraire}
              ajout de \macro{nevent}.
    
        \item \topic*{variance et écart-type}
              ajout de \macro{var} et \macro{stddev}.
    \end{itemize}
    
    \separation
% ------------------------ %

    \medskip
    \item[2020-07-10] Première version \verb+0.0.0-beta+.
% ------------------------ %

% Changes shown - END 
\end{description}


\newpage
\section{Toutes les fiches techniques} \label{techincal-ids}












\subsection{Juste pour rédiger}

\subsubsection{Probabilité \og simple \fg}



\IDmacro{proba}{1}{1}

\IDoption{} le nom de la probabilité. La valeur par défaut est \verb#P#.

\IDarg{} l'ensemble dont on veut calculer la probabilité.


% ---------------------- %


\subsubsection{Probabilité conditionnelle}



\IDmacro{probacond  }{1}{2}

\IDmacro{probacond* }{1}{2}

\extraspace

\IDmacro{eprobacond }{1}{2}

\IDmacro{eprobacond*}{1}{2}


\IDoption{} le nom de la probabilité. La valeur par défaut est \verb#P#.

\IDarg{1} l'ensemble qui donne la condition.

\IDarg{2} l'ensemble dont on veut calculer la probabilité.


\subsubsection{Évènement contraire}



\IDmacro[a]{nevent}{1}

\IDarg{} l'ensemble dont on veut indiquer le contraire.


\subsubsection{Espérance, variance et écart-type}



\IDmacro{expval}{1}{1}

\IDoption{} le nom de la fonction espérance. valeur par défaut est \verb#E#.

\IDarg{} la variable aléatoire dont on veut calculer l'espérance.


\separation


\IDmacro{var}{1}{1}

\IDoption{} le nom de la fonction variance. valeur par défaut est \verb#V#.

\IDarg{} la variable aléatoire dont on veut calculer la variance.


\separation


\IDmacro{stddev}{1}{1}

\IDoption{} le nom de la fonction écart-type. La valeur par défaut est \verb#\sigma#.

\IDarg{} la variable aléatoire dont on veut calculer l'écart-type.











\subsection{Calculer l'espérance -- Cas fini}



\IDmacro{calcexpval}{1}{1} \hfill \mwhyprefix{calc}{ulate}

                           \hfill \prefix{expval = exp-ected val-ue}

\IDoption{} un système de type \texttt{clé = valeur}.

\begin{enumerate}
    \item \verb#disp# indique ce qu'il faut afficher. La valeur par défaut est \verb#table#. Voici toutes les valeurs possibles.
	\begin{enumerate}
    	\item \verb#table # : un tableau donnant la loi est affiché seul.

    	\item \verb#all   # : un tableau donnant la loi est affiché suivi du début du calcul de l'espérance.

    	\item \verb#none  # : rien n'est affiché.
	
		\extraspace

    	\item \verb#exp   # : le début du calcul de l'espérance sans le tableau donnant la loi.

    	\item \verb#formal# : la formule avec $\Sigma$ .

    	\item \verb#eval  # : la somme des produits du type $p_k \cdot x_k$ .
	\end{enumerate}


    \medskip

    \item \verb#nosigma# : utilisée seule cette option demande de ne pas afficher la formule avec $\Sigma$ .


    \medskip

    \item \verb#E # : la macro utilisée pour écrire l'espérance.
		  \hfill
		  Par défaut \verb# E = \expval# .

    \item \verb#X # : le nom de la variable aléatoire.
		  \hfill
		  Par défaut \verb# X = X# .\verb#      #

    \item \verb#k # : l'indice.
		  \hfill
		  Par défaut \verb# k = k# .\verb#      #

    \item \verb#xk# : la lettre à indicer pour les valeurs de la variable aléatoire.
		  \hfill
		  Par défaut \verb#xk = x# .\verb#      #

    \item \verb#pk# : la lettre à indicer pour les valeurs des probabilités.
		  \hfill
		  Par défaut \verb#pk = p# .\verb#      #


    \medskip

    \item \verb#com# : un texte court éventuel à ajouter entre le tableau donnant la loi et le début du calcul de l'espérance.


    \medskip

    \item \verb#ope# : le symbole de multiplication.
		  \hfill
		  Par défaut \verb#ope = \cdot# .


    \medskip

    \item \verb#name # : un nom éventuel de la loi pour une utilisation ultérieure.

    \item \verb#reuse# : un nom indiquant ce qui doit être réutilisé.


    \medskip

    \item \verb#colors# : le cycle des couleurs au format TikZ séparées par des tirets.
		  
		  \smallskip
		  
		  \hfill
		  Par défaut \verb#colors = red - blue - orange - green!70!black# .
\end{enumerate}
%
%
\IDarg{} définition de la loi de la variable aléatoire finie avec une syntaxe semblable à celle d'un tableau.


























\subsection{Arbres pondérés}



\IDenv[o]{probatree}{1}


\IDoption{} la valeur par défaut étant \verb#asit#.
            \emph{\textbf{ATTENTION !} L'option s'indique via \texttt{<...>} et non le traditionnel \texttt{[...]}.}

\begin{enumerate}
    \item \verb#asit# : pour les poids, on suit les indications données dans le code.

    \item \verb#hideall# : on cache tous les poids quelque soient les indications données dans le code.

    \item \verb#showall# : on montre tous les poids quelque soient les indications données dans le code.
\end{enumerate}

\Content{} un arbre codé en utilisant la syntaxe supportée par le package \verb#forest#.

\extraspace

\IDkey{pweight}  pour écrire un poids sur le milieu d'une branche.

\IDkey{apweight} pour écrire un poids au-dessus le milieu d'une branche.

\IDkey{bpweight} pour écrire un poids en-dessous du milieu d'une branche.

\extraspace

\IDkey{pweight*} pour indiquer un poids sans l'imprimer.
Avec l'option \verb#showall# le poids sera affiché comme si on avait utilisé \verb#pweight#.

\IDkey{apweight*} pour indiquer un poids sans l'imprimer.
Avec l'option \verb#showall# le poids sera affiché comme si on avait utilisé \verb#apweight#.

\IDkey{bpweight*} pour indiquer un poids sans l'imprimer.
Avec l'option \verb#showall# le poids sera affiché comme si on avait utilisé \verb#bpweight#.

\extraspace

\IDkey{pframe} pour encadrer un sous-arbre depuis un noeud vers toutes les feuilles de celui-ci.


% ---------------------- %


\separation


\IDmacro{ptreeFrame}{1}{3} \hfill \mwhyprefix{p}{robabilty}

\IDoption{} un système de type \texttt{clé = valeur}.

\begin{enumerate}
    \item \verb#lcol# : la couleur au format TikZ du cadre. La valeur par défaut est \verb#blue#.
\end{enumerate}


\IDargs{1..3} les noms de la sous-racine (à gauche), du noeud final en haut (à droite) et du noeud final en bas (à droite) tous indiqués via \verb#name = ...# \emph{(en fait l'ordre n'est pas important ici)}.


\bigskip


\IDmacro{aptreeFrame}{1}{3} \hfill \mwhyprefix{a}{auto}

\extraspace
\extraspace

Voir les indications précédentes excepté qu'ici on utilise le système de nommage automatisé dérivé de celui de \verb#forest#.


% ---------------------- %


\separation


\IDmacro{ptreeComment }{1}{2}

\IDmacro{ptreeComment*}{1}{2}

\IDoption{} un système de type \texttt{clé = valeur}.

\begin{enumerate}
    \item \verb#tcol# : la couleur au format TikZ du texte. La valeur par défaut est \verb#black#.

    \item \verb#dx# : une distance horizontale relative de décalage. La valeur par défaut est \verb#0cm#.

    \item \verb#dy# : une distance verticale relative de décalage. La valeur par défaut est \verb#0cm#.
\end{enumerate}

\IDarg{1} le nom de la feuille.

\IDarg{2} le texte du commentaire.


\bigskip


\IDmacro{aptreeComment }{1}{2}

\IDmacro{aptreeComment*}{1}{2}

\extraspace
\extraspace

Voir les indications précédentes excepté qu'ici on utilise le système de nommage automatisé dérivé de celui de \verb#forest#.


% ---------------------- %


\separation


\IDmacro{ptreeTag }{1}{2}

\IDmacro{ptreeTag*}{1}{2}

\IDoption{} un système de type \texttt{clé = valeur}.

\begin{enumerate}
    \item \verb#tcol# : la couleur au format TikZ du texte. La valeur par défaut est \verb#black#.

    \item \verb#dx# : une distance horizontale relative de décalage. La valeur par défaut est \verb#0cm#.

    \item \verb#dy# : une distance verticale relative de décalage. La valeur par défaut est \verb#0cm#.
\end{enumerate}

\IDarg{1} le nom d'un noeud du niveau souhaité.

\IDarg{2} le texte décrivant le niveau.


\bigskip


\IDmacro{aptreeTag }{1}{2}

\IDmacro{aptreeTag*}{1}{2}

\extraspace
\extraspace

Voir les indications précédentes excepté qu'ici on utilise le système de nommage automatisé dérivé de celui de \verb#forest#.


% ---------------------- %


\separation


\IDmacro[a]{ptreeTextOf}{1}

\IDarg{} le nom du noeud.


%\bigskip
%
%
%\IDmacro[a]{aptreeTextOf}{1}
%
%\extraspace
%\extraspace
%
%Voir les indications précédentes excepté qu'ici on utilise le système de nommage automatisé dérivé de celui de \verb#forest#.


% ---------------------- %


\separation


\IDmacro[a]{ptreeNodeColor}{2}

\IDarg{1} le nom du noeud.

\IDarg{2} chacun des paramètres présentés ci-dessous est optionnel et par défaut la macro utilise \verb#tcol = black# et \verb#bcol = white#.

\begin{enumerate}
	\item \verb#tcol = ...# sert à indiquer la couleur du texte.

	\item \verb#bcol = ...# pour à indiquer la couleur du fond \emph{(\mwhyprefix{b}{ackground})}.
\end{enumerate}



%\bigskip
%
%
%\IDmacro[a]{aptreeNodeColor}{2}
%
%\extraspace
%\extraspace
%
%Voir les indications précédentes excepté qu'ici on utilise le système de nommage automatisé dérivé de celui de \verb#forest#.


% ---------------------- %


\separation


\IDmacro{ptreeNodeNewText}{1}{2}

\IDoption{} chacun des paramètres présentés ci-dessous est optionnel et par défaut la macro utilise \verb#tcol = black# et \verb#bcol = white#.

\begin{enumerate}
	\item \verb#tcol = ...# sert à indiquer la nouvelle couleur du texte.

	\item \verb#bcol = ...# pour à indiquer la nouvelle couleur du fond \emph{(\mwhyprefix{b}{ackground})}.
\end{enumerate}

\IDarg{1} le nom du noeud.

\IDarg{2} le nouveau texte.

%
%\bigskip
%
%
%\IDmacro{aptreeNodeNewText}{1}{2}
%
%\extraspace
%\extraspace
%
%Voir les indications précédentes excepté qu'ici on utilise le système de nommage automatisé dérivé de celui de \verb#forest#.


% ---------------------- %


\separation


\IDmacro{ptreeFocus}{1}{1}

\IDoption{} un système de type \texttt{clé = valeur}.

\begin{enumerate}    
    \item \verb#lcol# : la couleur au format TikZ des lignes des arrêtes et des cadres éventuels. La valeur par défaut est \verb#blue#.

    \item \verb#tcol# : la couleur au format TikZ du texte. La valeur par défaut est \verb#black#.

    \item \verb#bcol# : la couleur au format TikZ du fond. La valeur par défaut est \verb#white#.
    
    \extraspace
    
    \item \verb#frame# : le type d'encadrement souhaité. La valeur par défaut est \verb#nostart#. Voici les valeurs disponibles.
    \begin{enumerate}
    	\item \verb#nostart# : le 1\ier{} noeud n'est pas encadré mais les autres le sont.

    	\item \verb#start  # : tous les noeuds sont encadrés. 

    	\item \verb#none   # : aucun des noeuds n'est encadré.
    \end{enumerate}
\end{enumerate}

\IDarg{} les noms des noeuds indiqués via \verb#name = ...# à fournir dans le bon ordre et à séparer par des barres verticales \verb#|# .


\bigskip


\IDmacro{aptreeFocus}{1}{1}

\IDoption{} un système de type \texttt{clé = valeur}.

\begin{enumerate}    
    \item \verb#lcol# : la couleur au format TikZ des lignes des arrêtes et des cadres éventuels. La valeur par défaut est \verb#blue#.

    \extraspace
    
    \item \verb#frame# : voir les indications précédentes.
\end{enumerate}

\IDarg{} : voir les indications précédentes excepté qu'ici on utilise le système de nommage automatisé dérivé de celui de \verb#forest#.




\end{document}
